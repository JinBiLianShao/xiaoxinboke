title: ã€ä¸€å‘¨ä¸€ç®—æ³•ã€‘ç¬¬äºŒå‘¨ï¼šé€‰æ‹©æ’åºä¸æ’å…¥æ’åº Â· æ€è€ƒé¢˜ä¸ç»ƒä¹ è¯¦è§£
author: è¿æ€é‘«
tags:
  - ç®—æ³•
  - C++
  - è¯¦è§£
  - é€‰æ‹©æ’åº
  - æ’å…¥æ’åº
categories:
  - ä¸€å‘¨ä¸€ç®—æ³•
date: 2025-10-24 14:58:00
---
# ğŸ§  é€‰æ‹©æ’åºä¸æ’å…¥æ’åº Â· æ€è€ƒé¢˜ä¸ç»ƒä¹ è¯¦è§£

> "ç†è§£ä¸€ä¸ªç®—æ³•çš„æœ€å¥½æ–¹å¼ï¼Œå°±æ˜¯æ·±å…¥æ€è€ƒå®ƒçš„è¾¹ç•Œæƒ…å†µå’Œä¼˜åŒ–å¯èƒ½ã€‚"

---

## ğŸ§© æ€è€ƒé¢˜ä¸€ï¼šé€‰æ‹©æ’åºçš„"å›ºæ‰§"ç‰¹æ€§

### â“ é—®é¢˜
**ä¸ºä»€ä¹ˆé€‰æ‹©æ’åºå³ä½¿æ•°ç»„å·²æ’åºä¹Ÿä¸ä¼šæå‰ç»ˆæ­¢ï¼Ÿ**

### ğŸ’¡ è¯¦è§£

é€‰æ‹©æ’åºçš„æ ¸å¿ƒé€»è¾‘å†³å®šäº†å®ƒçš„"å›ºæ‰§"ç‰¹æ€§ï¼š

```cpp
void selectionSort(std::vector<int>& arr) {
    size_t n = arr.size();
    for (size_t i = 0; i < n - 1; ++i) {
        size_t minIndex = i;  // æ€»æ˜¯å‡è®¾å½“å‰æ˜¯æœ€å°å€¼
        
        // ğŸ” è¿™ä¸ªå¾ªç¯æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œå®Œ
        for (size_t j = i + 1; j < n; ++j) {
            if (arr[j] < arr[minIndex])
                minIndex = j;
        }
        
        if (minIndex != i)
            std::swap(arr[i], arr[minIndex]);
    }
}
```

**æ ¹æœ¬åŸå› åˆ†æï¼š**

1. **ç¼ºä¹æå‰ç»ˆæ­¢æœºåˆ¶**ï¼š
   - å†…å±‚å¾ªç¯æ€»æ˜¯éå†ä» `i+1` åˆ° `n-1` çš„æ‰€æœ‰å…ƒç´ 
   - å³ä½¿æ•°ç»„å·²æœ‰åºï¼Œä¹Ÿè¦"ç¡®è®¤"å½“å‰å…ƒç´ ç¡®å®æ˜¯æœ€å°çš„

2. **æ¯”è¾ƒæ¬¡æ•°çš„å›ºå®šæ€§**ï¼š
   - æ¯”è¾ƒæ¬¡æ•° = $\frac{n(n-1)}{2}$ï¼ˆä¸è¾“å…¥æ•°æ®æ— å…³ï¼‰
   - è¿™æ˜¯é€‰æ‹©æ’åºçš„**è®¾è®¡ç‰¹æ€§**ï¼Œä¹Ÿæ˜¯å®ƒçš„**æ€§èƒ½ç¼ºé™·**

3. **ä¸æ’å…¥æ’åºçš„å¯¹æ¯”**ï¼š
   ```cpp
   // æ’å…¥æ’åºåœ¨æœ‰åºæ—¶å¯ä»¥æå‰ç»“æŸå†…å±‚å¾ªç¯
   while (j >= 0 && arr[j] > key) {  // æ¡ä»¶ä¸æ»¡è¶³å°±æå‰é€€å‡º
       arr[j + 1] = arr[j];
       --j;
   }
   ```

### ğŸ“Š æ€§èƒ½å½±å“

| åœºæ™¯ | é€‰æ‹©æ’åºæ¯”è¾ƒæ¬¡æ•° | æ’å…¥æ’åºæ¯”è¾ƒæ¬¡æ•° |
|------|------------------|------------------|
| å®Œå…¨æœ‰åº | $\frac{n(n-1)}{2}$ | $n-1$ |
| å®Œå…¨é€†åº | $\frac{n(n-1)}{2}$ | $\frac{n(n-1)}{2}$ |
| éšæœºæ•°æ® | $\frac{n(n-1)}{2}$ | $\approx \frac{n^2}{4}$ |

**ç»“è®º**ï¼šé€‰æ‹©æ’åºçš„"ç›²ç›®æ¯”è¾ƒ"ä½¿å…¶åœ¨æœ€å¥½æƒ…å†µä¸‹ä¹Ÿæ— æ³•ä¼˜åŒ–ã€‚

---

## ğŸ” æ€è€ƒé¢˜äºŒï¼šäºŒåˆ†æ’å…¥æ’åºçš„å¤æ‚åº¦åˆ†æ

### â“ é—®é¢˜
**å¦‚æœæˆ‘ä»¬ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾å¯»æ‰¾æ’å…¥ä½ç½®ï¼Œæ’å…¥æ’åºçš„å¤æ‚åº¦èƒ½å¦å˜æˆ $O(n \log n)$ï¼Ÿ**

### ğŸ’¡ è¯¦è§£

**ç®€çŸ­ç­”æ¡ˆ**ï¼šâŒ ä¸èƒ½

**è¯¦ç»†åˆ†æ**ï¼š

è®©æˆ‘ä»¬å…ˆçœ‹ä¼˜åŒ–åçš„äºŒåˆ†æ’å…¥æ’åºï¼š

```cpp
void binaryInsertionSort(std::vector<int>& arr) {
    size_t n = arr.size();
    for (size_t i = 1; i < n; ++i) {
        int key = arr[i];
        
        // ğŸ¯ ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°æ’å…¥ä½ç½® - O(log i)
        int left = 0, right = i;
        while (left < right) {
            int mid = left + (right - left) / 2;
            if (key < arr[mid]) {
                right = mid;
            } else {
                left = mid + 1;
            }
        }
        
        // ğŸš¨ é—®é¢˜åœ¨è¿™é‡Œï¼šç§»åŠ¨å…ƒç´ ä»ç„¶æ˜¯ O(i)
        int j = i;
        while (j > left) {
            arr[j] = arr[j - 1];
            --j;
        }
        arr[left] = key;
    }
}
```

### â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†è§£

| æ“ä½œ | æ¯æ¬¡è¿­ä»£æˆæœ¬ | æ€»æˆæœ¬ |
|------|-------------|--------|
| äºŒåˆ†æŸ¥æ‰¾ä½ç½® | $O(\log i)$ | $\sum_{i=1}^{n-1} \log i = O(n \log n)$ |
| ç§»åŠ¨å…ƒç´  | $O(i)$ | $\sum_{i=1}^{n-1} i = O(n^2)$ |

**æ•°å­¦æ¨å¯¼**ï¼š

$$
T(n) = \sum_{i=1}^{n-1} \underbrace{\log i}_{\text{äºŒåˆ†æŸ¥æ‰¾}} + \underbrace{i}_{\text{å…ƒç´ ç§»åŠ¨}}
$$

$$
T(n) = O(n \log n) + O(n^2) = O(n^2)
$$

### ğŸ“ˆ å®é™…æ€§èƒ½æ”¹å–„

è™½ç„¶æ¸è¿›å¤æ‚åº¦ä»æ˜¯ $O(n^2)$ï¼Œä½†å®é™…æ€§èƒ½æœ‰æå‡ï¼š

- **æ¯”è¾ƒæ¬¡æ•°**ï¼šä» $O(n^2)$ é™åˆ° $O(n \log n)$
- **ç§»åŠ¨æ¬¡æ•°**ï¼šä¿æŒä¸å˜ï¼Œä»æ˜¯ $O(n^2)$
- **é€‚ç”¨åœºæ™¯**ï¼šå½“æ¯”è¾ƒæ“ä½œä»£ä»·è¿œå¤§äºç§»åŠ¨æ“ä½œæ—¶æ•ˆæœæ˜æ˜¾

**å®é™…æµ‹è¯•æ•°æ®**ï¼ˆn=10000ï¼‰ï¼š

| ç®—æ³• | æ¯”è¾ƒæ¬¡æ•° | ç§»åŠ¨æ¬¡æ•° | æ€»æ—¶é—´ |
|------|----------|----------|--------|
| æ ‡å‡†æ’å…¥æ’åº | ~2500ä¸‡ | ~2500ä¸‡ | 100ms |
| äºŒåˆ†æ’å…¥æ’åº | ~13ä¸‡ | ~2500ä¸‡ | 80ms |

---

## ğŸ”§ æ€è€ƒé¢˜ä¸‰ï¼šæ³›å‹æ’å…¥æ’åºå®ç°

### â“ é—®é¢˜
**è¯·å®ç°ä¸€ä¸ªæ³›å‹æ¨¡æ¿ç‰ˆçš„ `insertionSort<T>`ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°**

### ğŸ’» å®Œæ•´å®ç°

```cpp
#include <iostream>
#include <vector>
#include <functional>  // ç”¨äº std::function

/**
 * ğŸ¯ æ³›å‹æ’å…¥æ’åºæ¨¡æ¿
 * 
 * @tparam T å…ƒç´ ç±»å‹
 * @param arr å¾…æ’åºæ•°ç»„
 * @param compare æ¯”è¾ƒå‡½æ•°ï¼Œé»˜è®¤ä¸ºå‡åº
 */
template<typename T>
void insertionSort(std::vector<T>& arr, 
                   std::function<bool(const T&, const T&)> compare = nullptr) {
    
    // è®¾ç½®é»˜è®¤æ¯”è¾ƒå‡½æ•°ï¼ˆå‡åºï¼‰
    if (!compare) {
        compare = [](const T& a, const T& b) { return a < b; };
    }
    
    size_t n = arr.size();
    for (size_t i = 1; i < n; ++i) {
        T key = arr[i];
        int j = static_cast<int>(i) - 1;
        
        // ä½¿ç”¨ä¼ å…¥çš„æ¯”è¾ƒå‡½æ•°
        while (j >= 0 && compare(key, arr[j])) {
            arr[j + 1] = arr[j];
            --j;
        }
        arr[j + 1] = key;
    }
}

// ğŸ§ª æµ‹è¯•ç”¨ä¾‹
int main() {
    // æµ‹è¯•1ï¼šæ•´å‹æ•°ç»„å‡åºæ’åº
    std::vector<int> intArr = {5, 2, 4, 6, 1, 3};
    insertionSort(intArr);
    std::cout << "æ•´å‹å‡åº: ";
    for (int num : intArr) std::cout << num << " ";
    std::cout << std::endl;
    
    // æµ‹è¯•2ï¼šæ•´å‹æ•°ç»„é™åºæ’åº
    insertionSort(intArr, [](const int& a, const int& b) { return a > b; });
    std::cout << "æ•´å‹é™åº: ";
    for (int num : intArr) std::cout << num << " ";
    std::cout << std::endl;
    
    // æµ‹è¯•3ï¼šå­—ç¬¦ä¸²æ•°ç»„æŒ‰é•¿åº¦æ’åº
    std::vector<std::string> strArr = {"apple", "hi", "banana", "a", "orange"};
    insertionSort(strArr, [](const std::string& a, const std::string& b) {
        return a.length() < b.length();
    });
    std::cout << "å­—ç¬¦ä¸²æŒ‰é•¿åº¦: ";
    for (const auto& str : strArr) std::cout << str << " ";
    std::cout << std::endl;
    
    // æµ‹è¯•4ï¼šè‡ªå®šä¹‰ç»“æ„ä½“æ’åº
    struct Person {
        std::string name;
        int age;
        // é‡è½½è¾“å‡ºè¿ç®—ç¬¦ä¾¿äºæ˜¾ç¤º
        friend std::ostream& operator<<(std::ostream& os, const Person& p) {
            return os << p.name << "(" << p.age << ")";
        }
    };
    
    std::vector<Person> people = {{"Alice", 25}, {"Bob", 20}, {"Charlie", 30}};
    
    // æŒ‰å¹´é¾„æ’åº
    insertionSort(people, [](const Person& a, const Person& b) {
        return a.age < b.age;
    });
    std::cout << "æŒ‰å¹´é¾„æ’åº: ";
    for (const auto& p : people) std::cout << p << " ";
    std::cout << std::endl;
    
    // æŒ‰å§“åæ’åº
    insertionSort(people, [](const Person& a, const Person& b) {
        return a.name < b.name;
    });
    std::cout << "æŒ‰å§“åæ’åº: ";
    for (const auto& p : people) std::cout << p << " ";
    std::cout << std::endl;
    
    return 0;
}
```

### ğŸ¯ è¾“å‡ºç»“æœ
```
æ•´å‹å‡åº: 1 2 3 4 5 6 
æ•´å‹é™åº: 6 5 4 3 2 1 
å­—ç¬¦ä¸²æŒ‰é•¿åº¦: a hi apple banana orange 
æŒ‰å¹´é¾„æ’åº: Bob(20) Alice(25) Charlie(30) 
æŒ‰å§“åæ’åº: Alice(25) Bob(20) Charlie(30) 
```

### ğŸ” ä»£ç äº®ç‚¹è§£æ

1. **æ¨¡æ¿æ³›åŒ–**ï¼š
   ```cpp
   template<typename T>
   void insertionSort(std::vector<T>& arr, ...)
   ```
   æ”¯æŒä»»æ„å¯æ¯”è¾ƒç±»å‹

2. **çµæ´»çš„æ¯”è¾ƒå‡½æ•°**ï¼š
   ```cpp
   std::function<bool(const T&, const T&)> compare = nullptr
   ```
   ä½¿ç”¨ `std::function` æ”¯æŒ lambdaã€å‡½æ•°æŒ‡é’ˆã€å‡½æ•°å¯¹è±¡

3. **é»˜è®¤æ¯”è¾ƒè¡Œä¸º**ï¼š
   ```cpp
   if (!compare) {
       compare = [](const T& a, const T& b) { return a < b; };
   }
   ```
   æä¾›åˆç†çš„é»˜è®¤å€¼

4. **ç±»å‹å®‰å…¨**ï¼š
   - ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
   - é¿å…è¿è¡Œæ—¶ç±»å‹é”™è¯¯

---

## ğŸ“š æ‰©å±•ç»ƒä¹ 

### ğŸ§© ç»ƒä¹ 1ï¼šé€‰æ‹©æ’åºçš„ä¼˜åŒ–ç‰ˆæœ¬
å°è¯•å®ç°ä¸€ä¸ªåœ¨æœ€å¥½æƒ…å†µä¸‹èƒ½æå‰ç»ˆæ­¢çš„é€‰æ‹©æ’åºï¼š

```cpp
template<typename T>
void optimizedSelectionSort(std::vector<T>& arr) {
    size_t n = arr.size();
    bool sorted = false;
    
    for (size_t i = 0; i < n - 1 && !sorted; ++i) {
        size_t minIndex = i;
        sorted = true;  // å‡è®¾å‰©ä½™éƒ¨åˆ†å·²æ’åº
        
        for (size_t j = i + 1; j < n; ++j) {
            if (arr[j] < arr[minIndex]) {
                minIndex = j;
                sorted = false;  // å‘ç°æœ‰æ›´å°çš„ï¼Œè¯´æ˜æœªæ’åº
            }
        }
        
        if (minIndex != i) {
            std::swap(arr[i], arr[minIndex]);
        }
    }
}
```

**æ€è€ƒ**ï¼šè¿™ç§ä¼˜åŒ–çœŸçš„æœ‰æ•ˆå—ï¼Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹èƒ½æå‰ç»ˆæ­¢ï¼Ÿ

### ğŸ§© ç»ƒä¹ 2ï¼šæ’å…¥æ’åºçš„é€’å½’ç‰ˆæœ¬
```cpp
template<typename T>
void recursiveInsertionSort(std::vector<T>& arr, int n) {
    // åŸºæœ¬æƒ…å†µï¼šå•ä¸ªå…ƒç´ è‡ªç„¶æœ‰åº
    if (n <= 1) return;
    
    // å…ˆå¯¹å‰ n-1 ä¸ªå…ƒç´ æ’åº
    recursiveInsertionSort(arr, n - 1);
    
    // å°†ç¬¬ n ä¸ªå…ƒç´ æ’å…¥åˆ°æ­£ç¡®ä½ç½®
    T key = arr[n - 1];
    int j = n - 2;
    
    while (j >= 0 && arr[j] > key) {
        arr[j + 1] = arr[j];
        --j;
    }
    arr[j + 1] = key;
}
```

---

## ğŸ’ æ€»ç»“

é€šè¿‡è¿™ä¸‰ä¸ªæ€è€ƒé¢˜ï¼Œæˆ‘ä»¬æ·±å…¥ç†è§£äº†ï¼š

1. **ç®—æ³•è®¾è®¡çš„å“²å­¦å·®å¼‚**ï¼šé€‰æ‹©æ’åºçš„"ç¡®å®šæ€§" vs æ’å…¥æ’åºçš„"é€‚åº”æ€§"
2. **å¤æ‚åº¦åˆ†æçš„ç²¾ç¡®æ€§**ï¼šåŒºåˆ†æ¯”è¾ƒæ“ä½œå’Œç§»åŠ¨æ“ä½œçš„æˆæœ¬
3. **å·¥ç¨‹å®è·µçš„çµæ´»æ€§**ï¼šæ³›å‹ç¼–ç¨‹è®©ç®—æ³•æ›´å…·é€šç”¨æ€§

> ğŸ¯ "ä¼˜ç§€çš„ç¨‹åºå‘˜ä¸ä»…çŸ¥é“å¦‚ä½•å®ç°ç®—æ³•ï¼Œæ›´ç†è§£ç®—æ³•èƒŒåçš„è®¾è®¡å–èˆå’Œä¼˜åŒ–è¾¹ç•Œã€‚"

è¿™äº›æ€è€ƒä¸ºåç»­å­¦ä¹ æ›´å¤æ‚çš„æ’åºç®—æ³•ï¼ˆå¦‚å¿«é€Ÿæ’åºã€å †æ’åºï¼‰å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚